-if @dataset

  %h2
    Files for
    =link_to "#{@dataset.plaintext_citation}", dataset_path(@dataset.key)

  .row
    .col-md-2.col-md-offset-10
      =link_to "#{IDB_CONFIG[:root_url_text]}/datasets/#{@dataset.key}/datafiles/add", :class => "btn btn-success btn-block idb" do
        %span(class="glyphicon glyphicon-plus")
        Add File
  %hr
  -@dataset.datafiles.each do |datafile|
    .row
      .col-md-5.col-md-offset-1
        =link_to datafile.bytestream_name, "/datasets/#{@dataset.key}/datafiles/#{datafile.web_id}"
        -#%br
        -#binary:
        -#- if datafile.binary && datafile.binary.file
        -#  = debug(datafile.binary)
        -#- else
        -#  none
        -#%br
        -#medusa_path
        -#- if datafile.medusa_path
        -#  = datafile.medusa_path
        -#- else
        -#  none
      .col-md-2
        = number_to_human_size(datafile.bytestream_size)
      .col-md-2
        %a.btn.btn-primary.btn-block.idb(href="#{IDB_CONFIG[:root_url_text]}/datafiles/#{datafile.web_id}/download")
          %span(class="glyphicon glyphicon-download" )
          Download
      .col-md-2
        =link_to datafile_path(datafile.web_id), :method => :delete, :data => { :confirm => 'Are you sure?' }, :class => "btn btn-danger btn-block idb" do
          %span(class="glyphicon glyphicon-trash" )
          Delete
    %hr

-else
  -@datafiles.each do |datafile|
    Dataset:
    =(Dataset.where(id: datafile.dataset_id)).first.key
    %br
    =datafile.to_json
    %br

